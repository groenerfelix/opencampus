---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 


```{r}

library(readr)
library(lubridate)
library(ggplot2)
library(dplyr)

umsatzdaten <- read_csv("umsatzdaten_gekuerzt.csv")
kiwo <- read_csv("kiwo.csv")
wetter <- read_csv("wetter.csv")

```

```{r lesen der csv Dateien}
wetter <- read_csv("wetter.csv")

kiwo <- read_csv("kiwo.csv")

umsatzdaten_gekuerzt <- read_csv("umsatzdaten_gekuerzt.csv")
umsatz<-umsatzdaten_gekuerzt
umsatzdaten$wochentag <- weekdays(umsatzdaten$Datum)

Join<-dplyr::full_join(kiwo,wetter, by = "Datum")
UKW<-dplyr::full_join(Join,umsatz, by = "Datum")

```

```{r}
# include weekdays...

library(readr)
library(dplyr)
library(lubridate)
weekdays_holidays <- read_csv("weekdays_holidays.csv")
weekdays_holidays$Bewoelkung <- NULL
weekdays_holidays$Temperatur <- NULL
weekdays_holidays$Windgeschwindigkeit <- NULL
weekdays_holidays$Wettercode <- NULL
weekdays_holidays$weekday <- wday(weekdays_holidays$Datum, label = TRUE)
Join <- dplyr::left_join(weekdays_holidays,Join, by = "Datum")

# install.packages("timeDate","chron")
library(timeDate)
library(chron)
hlist <- c("Easter","DEAscension","DEGermanUnity","DEChristmasEve","DENewYearsEve") 
holidays <- dates(as.character(holiday(2012:2019,hlist)),format="Y-M-D" )
View(holidays)

#dplyr::left_join(x, y, by = "Datum")
#rm(hlist, holidays)

# some holidays are missing, check: https://zufish.schleswig-holstein.de/detail?areaId=&pstId=8967760&ouId=&infotype=0
# need help to include valuer "holidays" into weekdays_holidays_df

```

